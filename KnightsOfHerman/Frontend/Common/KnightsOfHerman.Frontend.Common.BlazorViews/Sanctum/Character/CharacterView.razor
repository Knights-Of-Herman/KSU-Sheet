@using KnightsOfHerman.Frontend.Common.BlazorViews.Sanctum.Character.Components.Armor
@using KnightsOfHerman.Frontend.Common.BlazorViews.Sanctum.Character.Components.Stats
@using KnightsOfHerman.Frontend.Common.Model.Sanctum.Character.Implementation
@using KnightsOfHerman.Frontend.Common.BlazorViews.Sanctum.Character.Components
@using KnightsOfHerman.Frontend.Common.BlazorViews.Sanctum.Character.Components.Bio
@using KnightsOfHerman.Frontend.Common.BlazorViews.Sanctum.Character.Components.Inventory
@using KnightsOfHerman.Frontend.Common.BlazorViews.Sanctum.Character.Components.Journal
@using KnightsOfHerman.Frontend.Common.BlazorViews.Sanctum.Character.Components.Abilities
@using KnightsOfHerman.Frontend.Common.BlazorViews.Sanctum.Character.Components.Weapons
@rendermode InteractiveServer

@using KnightsOfHerman.Frontend.Common.BlazorViews.Sanctum.Character.SubPages;

@if(_loading)
{
    <Loading />
}
else
{
    <MudHidden Breakpoint="Breakpoint.SmAndUp" Invert=true>
        <MudPaper Height="90vh" Width="100%" Class="mud-height-full" Style="position:relative; overflow:hidden; padding-top:10px;">
            <MudStack Style="height:100%; width:100%;" Spacing="1">
                <MudStack Row=true Style="height:100%; width:100%;">
                    <MudItem Style="height:100%; width:250px;">
                        <MudStack Style="height:100%">
                            <MudPaper Height="50px" Elevation="0">
                                <MudStack Row=true>
                                    <MudStack Spacing="0">
                                        <MudStack Row=true>
                                            <MudText Style="overflow:hidden" Typo="Typo.h4">@Model.Character.Bio.Name</MudText>
                                        </MudStack>
                                        <MudStack Row=true>
                                            <MudText Typo="Typo.caption">@Model.Character.Bio.Race • @Model.Character.Bio.Background</MudText>
                                        </MudStack>
                                    </MudStack>
                                </MudStack>
                            </MudPaper>
                            <MudPaper Style="height:calc(100% - 50px); overflow-y:scroll;">
                                <StatsListView Model="Model" />
                            </MudPaper>
                        </MudStack>
                    </MudItem>
                    <MudItem Style="width:100%; height:100%;">
                        <MudStack Style="width:100%; height:100%;">
                            <MudPaper Style="height:72px; width:100%;">
                                <CharacterInfoView Model="Model" />
                            </MudPaper>
                            <MudPaper Style="width:100%; height:calc(100% - 80px);">
                                <MudTabs MinimumTabWidth="30px" Position=Position.Left Border=true Elevation=0 Centered=true Style="height:100%; width: calc(100%); overflow:clip;">
                                    <MudTabPanel Style="width:100%; height:100%;" Icon="@KOHIcons.Sword" ToolTip="Weapons">
                                        <WeaponsSubPage Model="Model"/>
                                    </MudTabPanel>
                                    <MudTabPanel Style="width:100%; height:100%;" Icon="@KOHIcons.Armor" ToolTip="Armor">
                                        <ArmorSubPage Model=Model/>
                                    </MudTabPanel>
                                    <MudTabPanel Style="width:100%; height:100%;" Icon="@Icons.Material.Filled.ShoppingBag" ToolTip="Inventory">
                                        <InventorySubPage Model="Model"/>
                                    </MudTabPanel>
                                    <MudTabPanel Style="width:100%; height:100%;" Icon="@Icons.Material.Filled.CallToAction" ToolTip="Abilities">
                                        <AbilitiesSubPage Model="Model"/>
                                    </MudTabPanel>
                                    <MudTabPanel Style="width:100%; height:100%;" Icon="@Icons.Material.Filled.Note" ToolTip="Journal">
                                        <JournalSubPage Model="Model" />
                                    </MudTabPanel>
                                    <MudTabPanel Style="overflow:hidden;" Icon="@Icons.Material.Filled.Info" ToolTip="Bio">
                                        <CharacterBioView Model="Model"/>
                                    </MudTabPanel>
                                </MudTabs>
                            </MudPaper>
                        </MudStack>
                    </MudItem>
                </MudStack>
            </MudStack>
        </MudPaper>
    </MudHidden>
    <MudHidden Breakpoint="Breakpoint.SmAndUp">
       <MudContainer>
           <MudAlert Severity="Severity.Warning">View Size Not Currently Supported.</MudAlert>
       </MudContainer>
   </MudHidden>
}
@code
{
    bool open = false;

    void ToggleDrawer()
    {
        open = !open;
    }
}